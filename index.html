<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rumah Kata</title>
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            display: flex; flex-direction: column; align-items: center; 
            background-color: #ffffff; color: #1a1a1b; margin: 0; padding-top: 30px;
        }
        h1 { margin-bottom: 5px; letter-spacing: 2px; color: #333; }
        hr { width: 100%; max-width: 400px; border: 0; border-top: 1px solid #d3d6da; margin-bottom: 30px; }
        
        #grid { display: grid; grid-template-rows: repeat(6, 1fr); grid-gap: 5px; }
        .row { display: grid; grid-template-columns: repeat(5, 1fr); grid-gap: 5px; }
        
        .tile { 
            width: 58px; height: 58px; border: 2px solid #d3d6da; 
            display: flex; align-items: center; justify-content: center; 
            font-size: 2rem; font-weight: bold; text-transform: uppercase; 
            transition: all 0.2s;
        }
        
        /* State Warna */
        .correct { background-color: #6aaa64; border-color: #6aaa64; color: white; }
        .present { background-color: #c9b458; border-color: #c9b458; color: white; }
        .absent { background-color: #787c7e; border-color: #787c7e; color: white; }
        .tapped { border-color: #878a8c; color: black; }

        #message { margin-top: 30px; font-weight: bold; font-size: 1.2rem; min-height: 1.5rem; }
        .btn-reset { margin-top: 15px; padding: 10px 20px; cursor: pointer; border: none; background: #333; color: white; border-radius: 5px; }
    </style>
</head>
<body>

    <h1>RUMAH KATA</h1>
    <hr>
    <div id="grid"></div>
    <p id="message"></p>
    <button class="btn-reset" onclick="location.reload()">Main Lagi</button>

    <script>
        const WORD_LIST = ["INDAH", "KAHIM", "KEREN", "SEKRE", "RUMAH"];
        const ANSWER = WORD_LIST[Math.floor(Math.random() * WORD_LIST.length)];
        const MAX_ATTEMPTS = 6;
        
        let currentAttempt = 0;
        let currentGuess = "";
        let isGameOver = false;

        // Inisialisasi Grid
        const grid = document.getElementById('grid');
        for (let i = 0; i < MAX_ATTEMPTS; i++) {
            const row = document.createElement('div');
            row.className = 'row';
            for (let j = 0; j < 5; j++) {
                const tile = document.createElement('div');
                tile.className = 'tile';
                tile.id = `tile-${i}-${j}`;
                row.appendChild(tile);
            }
            grid.appendChild(row);
        }

        document.addEventListener('keydown', (e) => {
            if (isGameOver) return;

            if (e.key === 'Enter') {
                if (currentGuess.length === 5) checkGuess();
            } else if (e.key === 'Backspace') {
                currentGuess = currentGuess.slice(0, -1);
                updateGrid();
            } else if (currentGuess.length < 5 && /^[a-zA-Z]$/.test(e.key)) {
                currentGuess += e.key.toUpperCase();
                updateGrid();
            }
        });

        function updateGrid() {
            for (let i = 0; i < 5; i++) {
                const tile = document.getElementById(`tile-${currentAttempt}-${i}`);
                tile.innerText = currentGuess[i] || "";
                tile.className = currentGuess[i] ? 'tile tapped' : 'tile';
            }
        }

        function checkGuess() {
            const rowTiles = [];
            for (let i = 0; i < 5; i++) {
                rowTiles.push(document.getElementById(`tile-${currentAttempt}-${i}`));
            }

            let tempAnswer = ANSWER.split('');
            let guessArr = currentGuess.split('');
            let statuses = new Array(5).fill('absent');

            // Cek Huruf Benar (Hijau)
            guessArr.forEach((char, i) => {
                if (char === ANSWER[i]) {
                    statuses[i] = 'correct';
                    tempAnswer[i] = null;
                }
            });

            // Cek Huruf Ada tapi Salah Posisi (Kuning)
            guessArr.forEach((char, i) => {
                if (statuses[i] !== 'correct' && tempAnswer.includes(char)) {
                    statuses[i] = 'present';
                    tempAnswer[tempAnswer.indexOf(char)] = null;
                }
            });

            // Terapkan Class Warna
            statuses.forEach((status, i) => {
                rowTiles[i].classList.add(status);
            });

            if (currentGuess === ANSWER) {
                document.getElementById('message').innerText = "Indah banget! Selamat, kamu berhasil menebak kata!";
                isGameOver = true;
            } else {
                currentAttempt++;
                currentGuess = "";
                if (currentAttempt === MAX_ATTEMPTS) {
                    document.getElementById('message').innerText = `Hey, it's okay! Refresh dan main lagi ya. Tadi jawabannya: ${ANSWER}`;
                    isGameOver = true;
                }
            }
        }
    </script>
</body>
</html>