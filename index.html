<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rumah Kata</title>
    <style>
        :root { --green: #6aaa64; --yellow: #c9b458; --gray: #787c7e; --border: #d3d6da; }
        body { 
            font-family: sans-serif; display: flex; flex-direction: column; 
            align-items: center; background: white; margin: 0; padding-top: 20px;
            user-select: none; /* Biar gak keganggu seleksi teks */
        }
        h1 { margin-bottom: 20px; letter-spacing: 2px; }
        #grid { display: grid; grid-template-rows: repeat(6, 1fr); grid-gap: 5px; }
        .row { display: grid; grid-template-columns: repeat(5, 1fr); grid-gap: 5px; }
        .tile { 
            width: 60px; height: 60px; border: 2px solid var(--border); 
            display: flex; align-items: center; justify-content: center; 
            font-size: 2rem; font-weight: bold; text-transform: uppercase; 
        }
        .correct { background: var(--green); border-color: var(--green); color: white; }
        .present { background: var(--yellow); border-color: var(--yellow); color: white; }
        .absent { background: var(--gray); border-color: var(--gray); color: white; }
        
        /* Input tersembunyi agar keyboard muncul */
        #hidden-input { position: absolute; opacity: 0; pointer-events: none; }
        #message { margin-top: 20px; font-weight: bold; min-height: 1.5rem; text-align: center; }
        .btn { margin-top: 10px; padding: 10px 20px; background: #333; color: white; border: none; border-radius: 5px; cursor: pointer; }

        /* Styling GIF agar rapi */
        #result-gif {
            display: none; 
            margin-top: 15px;
            max-width: 250px;
            border-radius: 8px;
        }
    </style>
</head>
<body onclick="focusInput()">

    <h1>RUMAH KATA</h1>
    
    <input type="text" id="hidden-input" maxlength="5" autocomplete="off" autofocus>

    <div id="grid"></div>
    <p id="message"></p>

    <img id="result-gif" src="" alt="Hasil Game">

    <button class="btn" onclick="location.reload()">Main Lagi</button>

    <script>
        const WORDS = ["INDAH", "KAHIM", "KEREN", "SEKRE", "RUMAH", "HAZEK", "BULAN", "ZHANG", "VHAMB", "IFSTI", "DEBAT", "BEHEL", "BULAN",
            "JAHIM", "KAWIS", "KASUH", "TUBIS", "RESTU", "DEPOK", "13SKS"];
        const ANSWER = WORDS[Math.floor(Math.random() * WORDS.length)];
        const input = document.getElementById('hidden-input');
        const gifImg = document.getElementById('result-gif');
        let currentAttempt = 0;
        let isGameOver = false;

        // Buat Grid
        for (let i = 0; i < 6; i++) {
            const row = document.createElement('div');
            row.className = 'row';
            for (let j = 0; j < 5; j++) {
                const tile = document.createElement('div');
                tile.className = 'tile';
                tile.id = `tile-${i}-${j}`;
                row.appendChild(tile);
            }
            document.getElementById('grid').appendChild(row);
        }

        // Fokuskan input terus menerus
        function focusInput() { if (!isGameOver) input.focus(); }
        window.onload = focusInput;

        input.addEventListener('input', () => {
            if (isGameOver) return;
            const val = input.value.toUpperCase();
            // Update tampilan grid berdasarkan apa yang diketik di input tersembunyi
            for (let i = 0; i < 5; i++) {
                const tile = document.getElementById(`tile-${currentAttempt}-${i}`);
                tile.innerText = val[i] || "";
            }
        });

        input.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && input.value.length === 5) {
                checkGuess(input.value.toUpperCase());
                input.value = "";
            }
        });

        function checkGuess(guess) {
            const rowTiles = [];
            for (let i = 0; i < 5; i++) rowTiles.push(document.getElementById(`tile-${currentAttempt}-${i}`));

            let tempAnswer = ANSWER.split('');
            let statuses = new Array(5).fill('absent');

            // Cek Hijau
            guess.split('').forEach((char, i) => {
                if (char === ANSWER[i]) {
                    statuses[i] = 'correct';
                    tempAnswer[i] = null;
                }
            });

            // Cek Kuning
            guess.split('').forEach((char, i) => {
                if (statuses[i] !== 'correct' && tempAnswer.includes(char)) {
                    statuses[i] = 'present';
                    tempAnswer[tempAnswer.indexOf(char)] = null;
                }
            });

            // Update Warna
            statuses.forEach((status, i) => rowTiles[i].classList.add(status));

            if (guess === ANSWER) {
                document.getElementById('message').innerText = "Indah banget! Selamat, kamu berhasil menebak kata!";
                gifImg.src = "menang.gif"; // Path file lokal menang
                gifImg.style.display = "block";
                isGameOver = true;
            } else {
                currentAttempt++;
                if (currentAttempt === 6) {
                    document.getElementById('message').innerText = `Hey, it's okay! Refresh dan main lagi ya. Tadi jawabannya: ${ANSWER}`;
                    gifImg.src = "kalah.gif"; // Path file lokal kalah
                    gifImg.style.display = "block";
                    isGameOver = true;
                }
            }
        }
    </script>
</body>
</html>